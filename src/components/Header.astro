---
import { Image } from "astro:assets";
import runtodayapp from "@assets/runtodayapp.png";
import { supabase } from "@/lib/supabase";

const { data, error } = await supabase.auth.getSession();
---

<nav class="bg-white shadow-lg">
  <div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8">
    <div class="relative flex items-center justify-between h-16">
      <div
        class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start"
      >
        <div class="flex-shrink-0 flex items-center">
          <Image class="block h-8 w-auto" src={runtodayapp} alt="Logo" />
          <span class="ml-2 text-xl font-bold text-gray-800">runToday</span>
        </div>
        <div class="hidden sm:block sm:ml-6">
          <div class="flex space-x-4">
            <a
              href="#"
              class="text-gray-900 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium"
              >Dashboard</a
            >
            <a
              href="#"
              class="text-gray-900 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium"
              >Activities</a
            >
            <a
              href="#"
              class="text-gray-900 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium"
              >Statistics</a
            >
          </div>
        </div>
      </div>
      <div
        class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"
      >
        <div class="hidden sm:flex sm:items-center">
          {
            !data.session ? (
              <a
                href="/auth/login"
                class="bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700"
              >
                Login
              </a>
            ) : (
              <a
                href="/api/auth/signout"
                class="block w-full text-center text-gray-900 bg-gray-100 px-3 py-2 rounded-md text-base font-medium"
              >
                Logout
              </a>
            )
          }
        </div>
      </div>
    </div>
  </div>
</nav>
