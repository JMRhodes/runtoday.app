---
import Base from "@/layout/Base.astro";
import { supabase } from "@/lib/supabase";
import Activity from "@/components/Activity.astro";

let { data: activities, error } = await supabase.from("activities").select(`
    id,
    type,
    distance,
    duration,
    created_at,
    profiles (
      full_name,
      avatar_url
    )`);
---

<Base title="Home" showHeader={true}>
  <!-- Page content -->
  <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
    <div class="px-4 py-6 sm:px-0">
      {
        activities && activities.length > 0 ? (
          <div class="grid grid-cols-1 gap-4">
            {activities.map((activity) => (
              <Activity activity={activity} key={activity.id} />
            ))}
          </div>
        ) : (
          <div class="border-4 border-dashed border-gray-200 rounded-lg h-96 flex items-center justify-center">
            <p class="text-gray-500 text-xl">No recent activities</p>
          </div>
        )
      }
    </div>
  </div>
</Base>
